{% extends 'base.html' %} {% block content %}
<!-- Content -->
<div class="container-xxl flex-grow-1 container-p-y">
	<div class="fw-bold mb-4">
		<span class="text-muted fw-light">DataCraft / </span>
		<span class="text-muted fw-light">Eksprolasi Data / </span>
		<span class="color-custom-secondary">{{ title }}</span>
	</div>

  <!-- Flash Messages -->
  {% if success_message %}
	<div class="alert alert-success d-flex align-items-center alert-dismissible fade show" role="alert">
		<i class="bx bx-info-circle me-2"></i>
		<div>
			{{ success_message }}
		</div>
		<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
  {% endif %}

	<div class="row">
		<div class="col-12 mb-4 order-0">
			<!-- HTML5 Inputs for Dataset Creation -->
			<div class="card mb-4">
				<h5 class="card-header">Buat Dataset dari Twitter</h5>
				<div class="card-body">
					{% if success_message %}
					<form action="" method="POST">
						<div class="mb-3 row">
							<label for="keyword-input" class="col-md-2 col-form-label"
								>Kata Kunci</label
							>
							<div class="col-md-10">
								<input
									class="form-control"
									type="text"
									placeholder="Contoh: Kabinet Merah Putih"
									id="keyword-input"
									name="keyword"
									value="{{ keyword }}"
									required
									disabled />
							</div>
						</div>
						<div class="mb-3 row">
							<label for="tweet-limit-input" class="col-md-2 col-form-label"
								>Jumlah Tweet</label
							>
							<div class="col-md-10">
								<input
									class="form-control"
									type="number"
									placeholder="Contoh: 100"
									id="tweet-limit-input"
									name="tweet_limit"
									min="1"
									value="{{ tweet_limit }}"
									required
									disabled />
							</div>
						</div>
						<div class="mb-3 row">
							<label for="auth-token-input" class="col-md-2 col-form-label"
								>Twitter Auth Token</label
							>
							<div class="col-md-10">
								<input
									class="form-control"
									type="text"
									placeholder="Masukkan Token Anda"
									id="auth-token-input"
									name="auth_token"
									value="{{ auth_token }}"
									required
									disabled />
							</div>
						</div>
						<div class="row">
							<div class="col-md-10 offset-md-2">
								<button
									class="btn btn-primary d-flex align-items-center"
									type="submit"
									id="submit-btn"
									onclick="showLoading(event)"
									disabled>
									<span id="button-text">Ambil Data</span>
									<div
										id="loading-spinner"
										class="spinner-border spinner-border-sm ms-2 d-none"
										role="status">
										<span class="visually-hidden">Loading...</span>
									</div>
								</button>
							</div>
						</div>
					</form>
					<hr class="divider">
					<div class="d-flex justify-content-between align-items-center">
						<div class="">
							<a href="{{ url_for('create_dataset') }}"
								class="btn btn-danger btn-sm ms-3">
								<i class="bx bx-arrow-back"></i>
								&nbsp; Kembali
							</a>
						</div>
						<div class="">
							<a
								href="{{ download_link }}"
								class="btn btn-success btn-sm ms-3"
								download>
								<i class="bx bx-download"></i>
								&nbsp; Unduh Dataset
							</a>
							<a href="{{ url_for('upload_dataset') }}"
								class="btn btn-primary btn-sm ms-3">
								<i class='bx bx-upload'></i>
								&nbsp; Unggah Dataset
							</a>
						</div>
					</div>
					{% else %}
					<form action="" method="POST">
						<div class="mb-3 row">
							<label for="keyword-input" class="col-md-2 col-form-label"
								>Kata Kunci</label
							>
							<div class="col-md-10">
								<input
									class="form-control"
									type="text"
									placeholder="Contoh: Kabinet Merah Putih"
									id="keyword-input"
									name="keyword"
									required />
							</div>
						</div>
						<div class="mb-3 row">
							<label for="tweet-limit-input" class="col-md-2 col-form-label"
								>Jumlah Tweet</label
							>
							<div class="col-md-10">
								<input
									class="form-control"
									type="number"
									placeholder="Contoh: 100"
									id="tweet-limit-input"
									name="tweet_limit"
									min="1"
									required />
							</div>
						</div>
						<div class="mb-3 row">
							<label for="auth-token-input" class="col-md-2 col-form-label"
								>Twitter Auth Token</label
							>
							<div class="col-md-10">
								<input
									class="form-control"
									type="text"
									placeholder="Masukkan Token Anda"
									id="auth-token-input"
									name="auth_token"
									required />
							</div>
						</div>
						<div class="row">
							<div class="col-md-10 offset-md-2">
								<button
									class="btn btn-primary d-flex align-items-center"
									type="submit"
									id="submit-btn"
									onclick="showLoading(event)">
									<span id="button-text">Ambil Data</span>
									<div
										id="loading-spinner"
										class="spinner-border spinner-border-sm ms-2 d-none"
										role="status">
										<span class="visually-hidden">Loading...</span>
									</div>
								</button>
							</div>
						</div>
					</form>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
<!-- / Content -->
{% endblock %}
