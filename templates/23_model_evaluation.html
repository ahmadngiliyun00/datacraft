{% extends 'base.html' %}
{% block content %}
<div class="container-xxl flex-grow-1 container-p-y">
  <div class="fw-bold mb-4">
    <span class="text-muted fw-light">DataCraft / </span>
    <span class="text-muted fw-light">Evaluasi / </span>
    <span class="color-custom-secondary">{{ title }}</span>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  {% for category, message in messages %}
  <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  {% endfor %}
  {% endif %}
  {% endwith %}

  <div class="row">
    <!-- Ringkasan Akurasi -->
    <div class="col-12 mb-4">
      <div class="card">
        <h5 class="card-header text-primary">Perbandingan Akurasi Antar Model</h5>
        <div class="card-body text-center">
          {% if accuracy_chart_path %}
          <img src="{{ accuracy_chart_path }}" alt="Perbandingan Akurasi" class="img-fluid" />
          {% else %}
          <p class="text-danger">Grafik Perbandingan Akurasi tidak tersedia.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Performa Naive Bayes -->
    <div class="col-12 mb-4">
      <div class="card">
        <h5 class="card-header text-primary">Performa Naive Bayes dan SVM Per Kelas</h5>
        <div class="card-body text-center">
          <div class="row">
            <div class="col-12 col-md-6">
              {% if nb_performance_path %}
              <img src="{{ nb_performance_path }}" alt="Performa Naive Bayes" class="img-fluid" />
              {% else %}
              <p class="text-danger">Grafik Performa Naive Bayes tidak tersedia.</p>
              {% endif %}
            </div>
            <div class="col-12 col-md-6">
              {% if svm_performance_path %}
              <img src="{{ svm_performance_path }}" alt="Performa SVM" class="img-fluid" />
              {% else %}
              <p class="text-danger">Grafik Performa SVM tidak tersedia.</p>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabel Data Evaluasi Naive Bayes dan SVM -->
    <div class="col-12 mb-4">
      <div class="card">
        <h5 class="card-header text-primary">Detail Evaluasi Naive Bayes dan SVM</h5>
        <div class="card-body">
          <div class="table-responsive mb-4">
            <h6>Evaluasi Model Naive Bayes</h6>
            <table class="table table-striped table-hover">
              <thead class="table-light">
                <tr>
                  <th>Kelas</th>
                  <th>Akurasi</th>
                  <th>Presisi</th>
                  <th>Recall</th>
                  <th>F1-Score</th>
                  <th>Support</th>
                </tr>
              </thead>
              <tbody>
                {% for row in naive_bayes_data %}
                <tr>
                  <td class="text-center">{{ row['Kelas'] }}</td>
                  <td class="text-center">{{ "%.2f"|format(row['Akurasi'] * 100) }}%</td>
                  <td class="text-center">{{ "%.2f"|format(row['Presisi'] * 100) }}%</td>
                  <td class="text-center">{{ "%.2f"|format(row['Recall'] * 100) }}%</td>
                  <td class="text-center">{{ "%.2f"|format(row['F1-Score'] * 100) }}%</td>
                  <td class="text-center">{{ row['Support'] }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <div class="table-responsive mt-4">
            <h6>Evaluasi Model Support Vector Machine</h6>
            <table class="table table-striped table-hover">
              <thead class="table-light">
                <tr>
                  <th>Kelas</th>
                  <th>Akurasi</th>
                  <th>Presisi</th>
                  <th>Recall</th>
                  <th>F1-Score</th>
                  <th>Support</th>
                </tr>
              </thead>
              <tbody>
                {% for row in svm_data %}
                <tr>
                  <td class="text-center">{{ row['Kelas'] }}</td>
                  <td class="text-center">{{ "%.2f"|format(row['Akurasi'] * 100) }}%</td>
                  <td class="text-center">{{ "%.2f"|format(row['Presisi'] * 100) }}%</td>
                  <td class="text-center">{{ "%.2f"|format(row['Recall'] * 100) }}%</td>
                  <td class="text-center">{{ "%.2f"|format(row['F1-Score'] * 100) }}%</td>
                  <td class="text-center">{{ row['Support'] }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
