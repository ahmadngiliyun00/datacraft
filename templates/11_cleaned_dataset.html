{% extends 'base.html' %}
{% block content %}
<div class="container-xxl flex-grow-1 container-p-y">
    <div class="fw-bold mb-4">
        <span class="text-muted fw-light">DataCraft / </span>
        <span class="text-muted fw-light">Eksplorasi Data / </span>
        <span class="color-custom-secondary">{{ title }}</span>
    </div>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    <div class="row">
        <div class="col-12 mb-4 order-0">
            <!-- Informasi Dataset -->
            <div class="card mb-4">
                <h5 class="card-header">Informasi Dataset</h5>
                <div class="card-body">
                    <ul>
                        <li><strong>Dimensi Dataset:</strong> {{ data_shape }}</li>
                        <li><strong>Jumlah Duplikat:</strong> {{ duplicate_count }}</li>
                        <li><strong>Jumlah Nilai Kosong:</strong> {{ null_count }}</li>
                    </ul>
                </div>
            </div>
            <!-- Menampilkan Data -->
            <div class="card mb-4">
                <h5 class="card-header">Data Head</h5>
                <div class="card-body">
                    {{ data_head | safe }}
                </div>
            </div>
            <div class="card mb-4">
                <h5 class="card-header">Statistik Deskriptif</h5>
                <div class="card-body">
                    {{ data_description | safe }}
                </div>
            </div>
            <!-- Visualisasi -->
            <div class="card mb-4">
                <h5 class="card-header">WordCloud</h5>
                <div class="card-body">
                    <img src="{{ wordcloud_path }}" alt="WordCloud" class="img-fluid" draggable="false" />
                </div>
            </div>
            <!-- Link Unduh Dataset -->
            <div class="card mb-4">
                <h5 class="card-header">Unduh Dataset yang Telah Dibersihkan</h5>
                <div class="card-body">
                    <a href="{{ url_for('download_file', filename=output_file) }}" class="btn btn-primary" download>
                        Unduh Dataset
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}